import{r as s,j as e,g as y,R as w,P as j,A as v,c as S}from"./styles.js";const C="https://imageplustexttoimage.mcp-ui-flows-nanobanana.workers.dev/api/payloads",R="https://city-quest-video-gen.vercel.app/share/",h=540,p=96,E={storyData:{title:"Ruben Casas Joins MCP-UI",date:"2024-12-15T14:30:00Z",mainImage:"https://images.iwasthere.today/combined-1758063844495-cfp5dy.png",slides:[{image:"https://images.iwasthere.today/combined-1758063844495-cfp5dy.png",text:"MCP-UI literally sent a fruit basket coded in TypeScript to woo Ruben—he forked it and merged himself into their team."},{image:"https://images.iwasthere.today/wired_silicon-valley-opens-1-3-6%20(1).jpg",text:"During negotiations, Ruben demanded dark mode in every conference room; MCP-UI responded by turning the entire campus’ lights off until he signed."},{image:"https://images.iwasthere.today/succession1.jpg",text:"His onboarding involved a code review with a sentient AI who only speaks in GIFs—Ruben nodded, pretended to understand, and deployed to prod."},{image:"https://images.iwasthere.today/blackmirror1.jpg",text:"Sources say Ruben is already planning a refactor of MCP-UI’s coffee machine firmware to add CI/CD (Coffee Integration/Continuous Drip)."}]}};function I(){const[r,a]=s.useState(()=>typeof window>"u"?720:Math.max(h,window.innerHeight-p)),[d,l]=s.useState(null),[f,c]=s.useState(!0),[o,m]=s.useState(null),i=s.useCallback(async t=>{c(!0),m(null),l(null);try{const n=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E),signal:t});if(!n.ok)throw new Error(`Failed to generate story: ${n.statusText}`);const u=(await n.json())?.id;if(!u)throw new Error("Story share id missing from response");t?.aborted||l(u)}catch(n){if(n instanceof DOMException&&n.name==="AbortError"||t?.aborted)return;console.error("CityQuest video share failed:",n),m("The transmission crystal fizzled. Try syncing again.")}finally{t?.aborted||c(!1)}},[]);s.useEffect(()=>{if(typeof window>"u")return;const t=()=>{a(Math.max(h,window.innerHeight-p))};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),s.useEffect(()=>{const t=new AbortController;return i(t.signal),()=>t.abort()},[i]);const b=o?"Signal lost // waiting for relay":f?"Calibrating // syncing cinematic memory":"Share ready // streaming now";return e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-b from-slate-950 via-zinc-950 to-amber-950 px-4 py-10 text-white",children:[e.jsxs("header",{className:"mx-auto mb-8 max-w-4xl text-center",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-200/70",children:"CityQuest // Story Dispatch"}),e.jsx("h1",{className:"mt-2 text-3xl font-semibold",children:"Cinematic Mission Debrief"}),e.jsx("p",{className:"mx-auto mt-2 max-w-xl text-sm text-amber-100/70",children:"We are packaging Ruben's onboarding saga for the guild archive. Once the relay responds, the stream will materialize below."})]}),e.jsxs("div",{className:"relative mx-auto w-full max-w-4xl overflow-hidden rounded-3xl border border-white/10 bg-black/40 shadow-2xl backdrop-blur",style:{height:r},children:[d?e.jsx("iframe",{src:`${R}${d}`,title:"CityQuest video summary",className:"h-full w-full border-0",scrolling:"no",style:{overflow:"hidden",height:r},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 px-6 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full border border-amber-300/40 bg-amber-400/10",children:e.jsx("span",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-amber-200 border-b-transparent"})}),e.jsx("p",{className:"text-xl font-medium",children:"Summoning the story shard…"}),e.jsx("p",{className:"max-w-md text-sm text-amber-100/70",children:o||"Hold steady while the guild renders your adventure recap."})]}),o&&e.jsx("button",{type:"button",onClick:()=>{i()},className:"rounded-full border border-amber-500/50 bg-amber-500/10 px-6 py-2 text-sm font-semibold text-amber-100 transition hover:bg-amber-500/20",children:"Retry Sync"})]}),e.jsxs("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 flex justify-between px-6 py-4 text-xs uppercase tracking-[0.2em] text-white/50",children:[e.jsx("span",{children:"Status"}),e.jsx("span",{children:b})]})]})]})}const x="tanstack-app-root";function N(){const r=document.getElementById(x);if(!r)throw new Error(`Container #${x} not found`);let a=r._reactRoot;return a||(a=S.createRoot(r),r._reactRoot=a),a}function k(){const r=y();N().render(e.jsx(w.StrictMode,{children:e.jsx(j,{...r,children:e.jsx(v,{children:e.jsx(I,{})})})}))}k();
