import{r as c,j as e,g as w,R as f,P as g,A as h,c as N}from"./styles.js";const m={playerName:"Guild Runner",score:0,progressPercentage:0,badges:["Awaiting briefing"],lastCheckpoint:"No score changes reported yet.",status:"Standing by",updatedAt:new Date().toISOString()};function j(t){return typeof t!="number"||Number.isNaN(t)?0:Math.min(100,Math.max(0,t))}function x(){return typeof window<"u"&&window.__MCP_UI_INITIAL_RENDER_DATA__&&window.__MCP_UI_INITIAL_RENDER_DATA__.toolOutput?window.__MCP_UI_INITIAL_RENDER_DATA__.toolOutput:typeof window<"u"&&window.__MCP_UI_INITIAL_RENDER_DATA__?window.__MCP_UI_INITIAL_RENDER_DATA__:typeof window<"u"&&window.openai&&window.openai.toolOutput?window.openai.toolOutput:typeof window<"u"&&window.__MCP_WIDGET_LAST_TOOL_OUTPUT__?window.__MCP_WIDGET_LAST_TOOL_OUTPUT__:null}function y(){const[t,r]=c.useState(()=>{const s=x();return{...m,...s}});c.useEffect(()=>{let s="";const a=()=>{const _=x(),n={...m,..._},l=JSON.stringify(n);l!==s&&(s=l,r(n),typeof window<"u"&&(window.__MCP_WIDGET_LAST_TOOL_OUTPUT__=n))};a();const b=setInterval(a,700),d=()=>a();return window.addEventListener("message",d),()=>{clearInterval(b),window.removeEventListener("message",d)}},[]);const o=j(t.progressPercentage),i=Array.isArray(t.badges)?t.badges.slice(0,6):[],p=t.updatedAt?new Date(t.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--";return e.jsx("div",{className:"min-h-[calc(100vh-5rem)] bg-gradient-to-b from-purple-950 via-amber-950 to-stone-950 py-12 text-white",children:e.jsx("div",{className:"mx-auto flex w-full max-w-4xl justify-center px-6",children:e.jsxs("section",{className:"w-full max-w-2xl space-y-6 rounded-3xl border border-amber-800/20 bg-amber-950/20 p-8 shadow-2xl backdrop-blur",children:[e.jsxs("header",{children:[e.jsx("p",{className:"mb-3 text-xs uppercase tracking-[0.35em] text-amber-100",children:"CityQuest // Score Beacon"}),e.jsx("h1",{className:"m-0 text-3xl font-semibold text-white",children:t.playerName||"Adventurer"}),e.jsx("p",{className:"mt-1.5 text-sm text-amber-200/80",children:t.lastCheckpoint||"Tracking your footsteps..."})]}),e.jsxs("section",{className:"grid grid-cols-[repeat(auto-fit,minmax(220px,1fr))] gap-4",children:[e.jsxs("div",{className:"min-h-[130px] rounded-2xl border border-amber-700/30 bg-amber-900/30 p-5",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.1em] text-amber-100",children:"Total Score"}),e.jsx("p",{className:"mt-2 text-4xl font-bold text-white",children:typeof t.score=="number"?t.score.toLocaleString():"0"})]}),e.jsxs("div",{className:"min-h-[130px] rounded-2xl border border-amber-700/30 bg-amber-900/30 p-5",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.1em] text-amber-100",children:"Progress"}),e.jsx("div",{className:"mt-3 h-2 overflow-hidden rounded-full bg-amber-900/50 border border-amber-700/30",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-amber-500 via-yellow-500 to-amber-500 transition-all duration-300 ease-out shadow-lg shadow-amber-500/50",style:{width:`${o}%`}})}),e.jsxs("p",{className:"mt-2 text-base text-amber-200/80",children:[e.jsx("span",{children:o.toFixed(0)}),"% synced"]})]})]}),e.jsxs("section",{className:"rounded-2xl border border-amber-800/20 bg-amber-950/30 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-amber-100",children:[e.jsx("span",{children:"Badges + Perks"}),e.jsx("time",{children:p})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2.5",children:i.length===0?e.jsx("span",{className:"rounded-full border border-amber-600/40 bg-amber-800/30 px-3.5 py-2 text-xs text-amber-200",children:"No badges yet"}):i.map((s,a)=>e.jsx("span",{className:"rounded-full border border-amber-600/40 bg-amber-800/30 px-3.5 py-2 text-xs text-amber-200",children:s},a))})]}),e.jsxs("p",{className:"text-sm text-amber-200/80",children:["Last dispatch: ",e.jsx("strong",{className:"text-amber-300",children:t.status||"Standing by"})]})]})})})}const u="tanstack-app-root";function T(){const t=document.getElementById(u);if(!t)throw new Error(`Container #${u} not found`);let r=t._reactRoot;return r||(r=N.createRoot(t),t._reactRoot=r),r}function I(){const t=w();T().render(e.jsx(f.StrictMode,{children:e.jsx(g,{...t,children:e.jsx(h,{children:e.jsx(y,{})})})}))}I();
